{"version":3,"file":"/packages/app-editor.js","sources":["app-editor/editor.html","app-editor/editor.js"],"names":[],"mappings":";;;;;;;;;AACA,mC;AACA,0E;AACA,kB;AACA,gC;AACA,kD;AACA,iB;AACA,uF;AACA,K;AACA,I;;AAEA,kC;AACA,wE;AACA,kB;AACA,mB;AACA,kC;AACA,8B;AACA,qB;AACA,2F;AACA,mB;AACA,mI;AACA,qB;AACA,wC;AACA,mB;AACA,mC;AACA,8H;AACA,+E;AACA,gE;AACA,mB;AACA,mC;AACA,+H;AACA,qF;AACA,yE;AACA,I;;AAEA,sC;AACA,gF;AACA,kB;AACA,gC;AACA,sD;AACA,iB;AACA,+F;AACA,uC;AACA,iD;AACA,iB;AACA,iC;AACA,2B;AACA,+I;AACA,O;AACA,qD;AACA,c;AACA,yD;AACA,wD;AACA,Q;AACA,mB;AACA,6D;AACA,8B;AACA,O;AACA,I;;AAEA,0C;AACA,wF;AACA,kB;AACA,oB;AACA,yC;AACA,mB;AACA,0C;AACA,oD;AACA,iB;AACA,oC;AACA,2B;AACA,yD;AACA,O;AACA,iC;AACA,wB;AACA,4G;AACA,Q;AACA,kB;AACA,0B;AACA,8B;AACA,sD;AACA,uC;AACA,qC;AACA,0B;AACA,0C;AACA,oD;AACA,iB;AACA,qC;AACA,2B;AACA,0F;AACA,Q;AACA,sB;AACA,mG;AACA,O;AACA,gD;AACA,wG;AACA,mB;AACA,2C;AACA,6B;AACA,+D;AACA,gB;AACA,2D;AACA,2D;AACA,U;AACA,qB;AACA,+D;AACA,gD;AACA,sC;AACA,kB;AACA,I;;AAEA,8C;AACA,gG;AACA,kB;AACA,oC;AACA,+C;AACA,iB;AACA,4F;AACA,K;AACA,I;;AAEA,uC;AACA,kF;AACA,kB;AACA,mB;AACA,yB;AACA,0H;AACA,K;AACA,+B;AACA,yB;AACA,2D;AACA,K;AACA,4B;AACA,8E;AACA,0D;AACA,mD;AACA,2D;AACA,+C;AACA,iB;AACA,qC;AACA,8B;AACA,gD;AACA,wE;AACA,mB;AACA,4D;AACA,uF;AACA,qB;AACA,6C;AACA,+B;AACA,mJ;AACA,W;AACA,iE;AACA,kB;AACA,6D;AACA,8D;AACA,Y;AACA,uB;AACA,iE;AACA,kD;AACA,6B;AACA,sC;AACA,gB;AACA,I;;AAEA,4B;AACA,4D;AACA,kB;AACA,gC;AACA,+C;AACA,iB;AACA,mE;AACA,qD;AACA,oB;AACA,K;AACA,I;;AAEA,sC;AACA,gF;AACA,kB;AACA,uB;AACA,uB;AACA,oE;AACA,K;AACA,4B;AACA,8E;AACA,sD;AACA,mD;AACA,wC;AACA,iB;AACA,sB;AACA,qD;AACA,M;AACA,oB;AACA,oE;AACA,M;AACA,yB;AACA,0E;AACA,M;AACA,uB;AACA,sD;AACA,M;AACA,6B;AACA,4D;AACA,K;AACA,O;AACA,I;;AAEA,0C;AACA,wF;AACA,kB;AACA,uB;AACA,uB;AACA,oE;AACA,K;AACA,4B;AACA,8E;AACA,sD;AACA,mD;AACA,2C;AACA,sB;AACA,qD;AACA,M;AACA,oB;AACA,oE;AACA,M;AACA,yB;AACA,0E;AACA,M;AACA,uB;AACA,sD;AACA,K;AACA,O;AACA,I;;AAEA,sC;AACA,gF;AACA,kB;AACA,uB;AACA,uB;AACA,oE;AACA,K;AACA,4B;AACA,8E;AACA,sD;AACA,mD;AACA,wC;AACA,iB;AACA,sB;AACA,qD;AACA,M;AACA,oB;AACA,oE;AACA,M;AACA,yB;AACA,0E;AACA,M;AACA,a;AACA,O;AACA,I;;AAEA,wC;AACA,oF;AACA,kB;AACA,qB;AACA,mB;AACA,sB;AACA,qD;AACA,M;AACA,oB;AACA,oE;AACA,M;AACA,yB;AACA,0E;AACA,M;AACA,uB;AACA,sD;AACA,K;AACA,K;AACA,I;;AAEA,6C;AACA,8F;AACA,kB;AACA,mB;AACA,yB;AACA,wG;AACA,K;AACA,K;AACA,I;;AAEA,0C;AACA,wF;AACA,kB;AACA,qB;AACA,uB;AACA,oE;AACA,K;AACA,0C;AACA,qB;AACA,yB;AACA,qD;AACA,M;AACA,sB;AACA,qD;AACA,M;AACA,oB;AACA,oE;AACA,K;AACA,iB;AACA,0D;AACA,4C;AACA,8E;AACA,sD;AACA,mD;AACA,iB;AACA,I;;AAEA,wC;AACA,oF;AACA,kB;AACA,uB;AACA,uB;AACA,oE;AACA,K;AACA,4B;AACA,8E;AACA,sD;AACA,mD;AACA,yC;AACA,sB;AACA,qD;AACA,M;AACA,oB;AACA,oE;AACA,M;AACA,yB;AACA,0E;AACA,K;AACA,0C;AACA,kD;AACA,iB;AACA,mD;AACA,yB;AACA,wD;AACA,O;AACA,mB;AACA,6D;AACA,+B;AACA,qD;AACA,wB;AACA,kB;AACA,I;;AAEA,wC;AACA,oF;AACA,kB;AACA,sB;AACA,yB;AACA,sH;AACA,K;AACA,4B;AACA,8E;AACA,M;AACA,I;;AAEA,2C;AACA,0F;AACA,kB;AACA,0B;AACA,I;;AAEA,yC;AACA,sF;AACA,kB;AACA,2D;AACA,mD;AACA,O;AACA,I;;;;;;;;;;;;;;;;;;;ACzXA,mD;;AAEA,gC;AACA,+C;AACA,E;;AAEA,2B;AACA,gD;AACA,yE;AACA,oG;AACA,kE;AACA,sE;AACA,yB;AACA,iB;AACA,8C;AACA,0B;AACA,oB;AACA,6D;AACA,E;;AAEA,4B;AACA,yC;AACA,yB;AACA,K;AACA,E;;AAEA,sB;AACA,yE;AACA,yC;AACA,iB;AACA,M;AACA,qD;AACA,wD;AACA,qE;AACA,qB;AACA,E;;AAEA,6B;AACA,yB;AACA,uC;AACA,K;AACA,G;;AAEA,2D;AACA,qC;AACA,Y;AACA,iD;AACA,e;AACA,M;AACA,E;;AAEA,qD;AACA,sB;AACA,8F;AACA,qB;AACA,wB;AACA,qC;AACA,kF;AACA,M;AACA,oC;AACA,oE;AACA,yD;AACA,2D;AACA,Y;AACA,6D;AACA,K;AACA,iB;AACA,E;;AAEA,uC;;AAEA,0D;AACA,gC;AACA,+C;AACA,yC;AACA,wD;AACA,qD;AACA,2D;AACA,qB;AACA,kB;AACA,O;AACA,iB;AACA,E;;AAEA,wC;AACA,sB;AACA,sB;AACA,mC;AACA,+C;AACA,0C;AACA,yC;AACA,kE;AACA,oB;AACA,6D;AACA,a;AACA,iC;AACA,S;AACA,K;AACA,oB;AACA,E;;AAEA,0C;AACA,+B;AACA,wC;AACA,kD;AACA,gB;AACA,oB;AACA,U;AACA,O;AACA,4B;AACA,wD;AACA,kC;AACA,gC;AACA,uC;AACA,oE;AACA,S;AACA,8D;AACA,uC;AACA,4C;AACA,qD;AACA,e;AACA,S;AACA,0C;AACA,O;;AAEA,kD;AACA,+B;AACA,E;;AAEA,sC;AACA,oD;AACA,8B;AACA,kC;AACA,sC;AACA,gB;AACA,+E;AACA,uC;AACA,S;AACA,K;AACA,+D;AACA,8B;AACA,mB;AACA,E;;AAEA,gC;AACA,oB;;AAEA,2D;AACA,sE;AACA,uC;AACA,W;AACA,O;AACA,E;;AAEA,8B;AACA,wC;AACA,+B;AACA,yB;AACA,a;AACA,6D;AACA,iC;AACA,sC;AACA,Y;AACA,yC;AACA,K;AACA,mD;AACA,gB;AACA,E;AACA,gC;AACA,sB;AACA,G;AACA,iC;AACA,uB;AACA,mC;AACA,mC;AACA,wF;AACA,4B;AACA,oB;AACA,K;AACA,G;;AAEA,oC;AACA,uB;AACA,wB;AACA,4E;AACA,M;AACA,6C;AACA,4C;AACA,M;AACA,0C;AACA,wD;AACA,K;AACA,G;;AAEA,yD;AACA,iE;AACA,E;;AAEA,iD;AACA,yB;AACA,0B;AACA,W;AACA,E;;AAEA,0C;AACA,qD;AACA,4B;AACA,gC;AACA,e;AACA,E;;AAEA,kC;;AAEA,8C;AACA,kB;AACA,qD;AACA,iD;AACA,6B;AACA,uD;AACA,0B;AACA,O;AACA,2E;AACA,gB;AACA,E;;AAEA,0D;AACA,kB;AACA,6C;AACA,8B;AACA,gB;AACA,6B;AACA,wB;AACA,+D;AACA,yD;AACA,sB;AACA,4B;AACA,sE;AACA,sB;AACA,yB;AACA,oD;AACA,sB;AACA,0B;AACA,yB;AACA,oB;AACA,4D;AACA,sB;AACA,S;AACA,mC;AACA,iC;AACA,oF;AACA,S;AACA,0C;AACA,K;AACA,gB;AACA,E;;AAEA,8D;AACA,+B;AACA,e;AACA,K;AACA,kB;AACA,wC;AACA,wD;AACA,kC;AACA,e;AACA,uC;AACA,6D;AACA,wC;AACA,gB;AACA,yE;AACA,4B;AACA,S;AACA,O;AACA,gB;AACA,E;;AAEA,mD;AACA,0D;AACA,uE;AACA,qD;AACA,0B;AACA,2B;AACA,6C;AACA,Y;AACA,E;;AAEA,2B;AACA,gC;AACA,2B;AACA,iE;AACA,oC;AACA,M;AACA,mC;AACA,2B;AACA,iE;AACA,uC;AACA,K;AACA,G;;AAEA,0C;AACA,gC;AACA,2B;AACA,gC;AACA,O;AACA,E;;AAEA,gC;AACA,6B;AACA,wC;AACA,yC;AACA,M;AACA,iC;AACA,4B;AACA,G","sourcesContent":["\nTemplate.__checkName(\"appEditors\");\nTemplate[\"appEditors\"] = new Template(\"Template.appEditors\", (function() {\n  var view = this;\n  return Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"editors\"));\n  }, function() {\n    return [ \"\\n    \", Spacebars.include(view.lookupTemplate(\"appEditor\")), \"\\n    \" ];\n  });\n}));\n\nTemplate.__checkName(\"appEditor\");\nTemplate[\"appEditor\"] = new Template(\"Template.appEditor\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"editor-wrapper init\"\n  }, \"\\n        \", HTML.FORM({\n    \"class\": \"editor\"\n  }, \"\\n            \", HTML.Raw('<div class=\"header\"></div>'), \"\\n            \", HTML.DIV({\n    \"class\": \"body\"\n  }, \"\\n                \", Spacebars.include(view.lookupTemplate(\"appEditorForm\")), \"\\n            \"), \"\\n            \", HTML.DIV({\n    \"class\": \"footer\"\n  }, \"\\n                \", HTML.BUTTON({\n    type: \"submit\",\n    \"class\": \"btn btn-primary save\"\n  }, \"\\n                    \", HTML.Raw('<span class=\"fa fa-save\"></span>'), \"\\n                    \", Blaze.View(function() {\n    return Spacebars.mustache(view.lookup(\"translate\"), \"editor.save\", \"Save\");\n  }), \"\\n                \"), \"\\n                \", HTML.BUTTON({\n    type: \"button\",\n    \"class\": \"btn btn-link discard\"\n  }, \"\\n                    \", HTML.Raw('<span class=\"fa fa-times\"></span>'), \"\\n                    \", Blaze.View(function() {\n    return Spacebars.mustache(view.lookup(\"translate\"), \"editor.discard\", \"Discard\");\n  }), \"\\n                \"), \"\\n            \"), \"\\n        \"), \"\\n    \");\n}));\n\nTemplate.__checkName(\"appEditorForm\");\nTemplate[\"appEditorForm\"] = new Template(\"Template.appEditorForm\", (function() {\n  var view = this;\n  return [ Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"i18nEnabled\"));\n  }, function() {\n    return [ \"\\n    \", Spacebars.include(view.lookupTemplate(\"appEditorI18nForm\")), \"\\n    \" ];\n  }), \"\\n    \", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"fields\"));\n  }, function() {\n    return [ \"\\n    \", HTML.DIV({\n      \"class\": function() {\n        return [ \"app-editor-form-group form-group \", Spacebars.mustache(view.lookup(\"class\")), \" \", Spacebars.mustache(view.lookup(\"name\")) ];\n      }\n    }, \"\\n        \", Blaze._TemplateWith(function() {\n      return {\n        currentContext: Spacebars.call(view.lookup(\".\")),\n        parentContext: Spacebars.call(view.lookup(\"..\"))\n      };\n    }, function() {\n      return Spacebars.include(view.lookupTemplate(\"field\"));\n    }), \"\\n    \"), \"\\n    \" ];\n  }) ];\n}));\n\nTemplate.__checkName(\"appEditorI18nForm\");\nTemplate[\"appEditorI18nForm\"] = new Template(\"Template.appEditorI18nForm\", (function() {\n  var view = this;\n  return [ HTML.UL({\n    \"class\": \"language-tab nav nav-tabs\",\n    role: \"tablist\"\n  }, \"\\n        \", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"languages\"));\n  }, function() {\n    return [ \"\\n        \", HTML.LI({\n      \"class\": function() {\n        return Spacebars.mustache(view.lookup(\"active\"));\n      }\n    }, \"\\n            \", HTML.A({\n      href: function() {\n        return [ \"#\", Spacebars.mustache(view.lookup(\"panelId\"), view.lookup(\"..\"), view.lookup(\"title\")) ];\n      },\n      role: \"tab\",\n      \"data-toggle\": \"tab\"\n    }, Blaze.View(function() {\n      return Spacebars.mustache(view.lookup(\"title\"));\n    })), \"\\n        \"), \"\\n        \" ];\n  }), \"\\n    \"), \"\\n    \", HTML.DIV({\n    \"class\": \"tab-content\"\n  }, \"\\n        \", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"languages\"));\n  }, function() {\n    return [ \"\\n        \", HTML.DIV({\n      \"class\": function() {\n        return [ \"tab-pane i18n-editor-tab \", Spacebars.mustache(view.lookup(\"active\")) ];\n      },\n      id: function() {\n        return Spacebars.mustache(view.lookup(\"panelId\"), view.lookup(\"..\"), view.lookup(\"title\"));\n      }\n    }, \"\\n            \", Blaze.Each(function() {\n      return Spacebars.dataMustache(view.lookup(\"i18nFields\"), view.lookup(\"..\"), view.lookup(\"title\"));\n    }, function() {\n      return [ \"\\n            \", HTML.DIV({\n        \"class\": \"form-group\"\n      }, \"\\n                \", Blaze._TemplateWith(function() {\n        return {\n          currentContext: Spacebars.call(view.lookup(\".\")),\n          parentContext: Spacebars.call(view.lookup(\"...\"))\n        };\n      }, function() {\n        return Spacebars.include(view.lookupTemplate(\"field\"));\n      }), \"\\n            \"), \"\\n            \" ];\n    }), \"\\n        \"), \"\\n        \" ];\n  }), \"\\n    \") ];\n}));\n\nTemplate.__checkName(\"appEditorArrayWrapper\");\nTemplate[\"appEditorArrayWrapper\"] = new Template(\"Template.appEditorArrayWrapper\", (function() {\n  var view = this;\n  return Spacebars.With(function() {\n    return Spacebars.call(view.lookup(\"data\"));\n  }, function() {\n    return [ \"\\n    \", Spacebars.include(view.lookupTemplate(\"appEditorArray\")), \"\\n    \" ];\n  });\n}));\n\nTemplate.__checkName(\"appEditorArray\");\nTemplate[\"appEditorArray\"] = new Template(\"Template.appEditorArray\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": function() {\n      return [ \"array-wrapper \", Spacebars.mustache(view.lookup(\"name\")), \" \", Spacebars.mustache(view.lookup(\"class\")) ];\n    }\n  }, \"\\n        \", HTML.LABEL({\n    \"class\": function() {\n      return Spacebars.mustache(view.lookup(\"labelClass\"));\n    }\n  }, Blaze.View(function() {\n    return Spacebars.mustache(view.lookup(\"translate\"), view.lookup(\"label\"));\n  }), \"\\n            \", HTML.SMALL(Blaze.View(function() {\n    return Spacebars.mustache(view.lookup(\"hint\"));\n  })), \"\\n        \"), \"\\n        \", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"data\"));\n  }, function() {\n    return [ \"\\n        \", HTML.DIV({\n      \"class\": \"array-element\"\n    }, \"\\n            \", Blaze.Each(function() {\n      return Spacebars.call(Spacebars.dot(view.lookup(\"..\"), \"fields\"));\n    }, function() {\n      return [ \"\\n            \", Spacebars.With(function() {\n        return Spacebars.dataMustache(view.lookup(\"mergedContext\"), view.lookup(\"..\"));\n      }, function() {\n        return [ \"\\n            \", HTML.DIV({\n          \"class\": function() {\n            return [ \"app-editor-form-group form-group \", Spacebars.mustache(view.lookup(\"class\")), \" \", Spacebars.mustache(view.lookup(\"name\")) ];\n          }\n        }, \"\\n                \", Blaze._TemplateWith(function() {\n          return {\n            currentContext: Spacebars.call(view.lookup(\".\")),\n            parentContext: Spacebars.call(view.lookup(\"....\"))\n          };\n        }, function() {\n          return Spacebars.include(view.lookupTemplate(\"field\"));\n        }), \"\\n            \"), \"\\n            \" ];\n      }), \"\\n            \" ];\n    }), \"\\n        \"), \"\\n        \" ];\n  }), \"\\n    \");\n}));\n\nTemplate.__checkName(\"aet\");\nTemplate[\"aet\"] = new Template(\"Template.aet\", (function() {\n  var view = this;\n  return Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"data\"));\n  }, function() {\n    return [ \"\\n    \", HTML.LABEL(\"Name: \", Blaze.View(function() {\n      return Spacebars.mustache(view.lookup(\"name\"));\n    })), \"\\n    \" ];\n  });\n}));\n\nTemplate.__checkName(\"appEditorText\");\nTemplate[\"appEditorText\"] = new Template(\"Template.appEditorText\", (function() {\n  var view = this;\n  return [ HTML.LABEL({\n    \"for\": function() {\n      return [ \"editor-\", Spacebars.mustache(view.lookup(\"name\")) ];\n    }\n  }, Blaze.View(function() {\n    return Spacebars.mustache(view.lookup(\"translate\"), view.lookup(\"label\"));\n  }), \"\\n        \", HTML.SMALL(Blaze.View(function() {\n    return Spacebars.mustache(view.lookup(\"hint\"));\n  })), \"\\n    \"), \"\\n    \", HTML.INPUT({\n    type: \"text\",\n    name: function() {\n      return Spacebars.mustache(view.lookup(\"name\"));\n    },\n    id: function() {\n      return [ \"editor-\", Spacebars.mustache(view.lookup(\"name\")) ];\n    },\n    \"class\": function() {\n      return [ \"form-control \", Spacebars.mustache(view.lookup(\"name\")) ];\n    },\n    value: function() {\n      return Spacebars.mustache(view.lookup(\"value\"));\n    },\n    placeholder: function() {\n      return Spacebars.mustache(view.lookup(\"placeholder\"));\n    }\n  }) ];\n}));\n\nTemplate.__checkName(\"appEditorTextarea\");\nTemplate[\"appEditorTextarea\"] = new Template(\"Template.appEditorTextarea\", (function() {\n  var view = this;\n  return [ HTML.LABEL({\n    \"for\": function() {\n      return [ \"editor-\", Spacebars.mustache(view.lookup(\"name\")) ];\n    }\n  }, Blaze.View(function() {\n    return Spacebars.mustache(view.lookup(\"translate\"), view.lookup(\"label\"));\n  }), \"\\n        \", HTML.SMALL(Blaze.View(function() {\n    return Spacebars.mustache(view.lookup(\"hint\"));\n  })), \"\\n    \"), \"\\n    \", HTML.TEXTAREA({\n    name: function() {\n      return Spacebars.mustache(view.lookup(\"name\"));\n    },\n    id: function() {\n      return [ \"editor-\", Spacebars.mustache(view.lookup(\"name\")) ];\n    },\n    \"class\": function() {\n      return [ \"form-control \", Spacebars.mustache(view.lookup(\"name\")) ];\n    },\n    value: function() {\n      return Spacebars.mustache(view.lookup(\"value\"));\n    }\n  }) ];\n}));\n\nTemplate.__checkName(\"appEditorFile\");\nTemplate[\"appEditorFile\"] = new Template(\"Template.appEditorFile\", (function() {\n  var view = this;\n  return [ HTML.LABEL({\n    \"for\": function() {\n      return [ \"editor-\", Spacebars.mustache(view.lookup(\"name\")) ];\n    }\n  }, Blaze.View(function() {\n    return Spacebars.mustache(view.lookup(\"translate\"), view.lookup(\"label\"));\n  }), \"\\n        \", HTML.SMALL(Blaze.View(function() {\n    return Spacebars.mustache(view.lookup(\"hint\"));\n  })), \"\\n    \"), \"\\n    \", HTML.INPUT({\n    type: \"file\",\n    name: function() {\n      return Spacebars.mustache(view.lookup(\"name\"));\n    },\n    id: function() {\n      return [ \"editor-\", Spacebars.mustache(view.lookup(\"name\")) ];\n    },\n    \"class\": function() {\n      return [ \"form-control \", Spacebars.mustache(view.lookup(\"name\")) ];\n    },\n    value: \"\"\n  }) ];\n}));\n\nTemplate.__checkName(\"appEditorHidden\");\nTemplate[\"appEditorHidden\"] = new Template(\"Template.appEditorHidden\", (function() {\n  var view = this;\n  return HTML.INPUT({\n    type: \"hidden\",\n    name: function() {\n      return Spacebars.mustache(view.lookup(\"name\"));\n    },\n    id: function() {\n      return [ \"editor-\", Spacebars.mustache(view.lookup(\"name\")) ];\n    },\n    \"class\": function() {\n      return [ \"form-control \", Spacebars.mustache(view.lookup(\"name\")) ];\n    },\n    value: function() {\n      return Spacebars.mustache(view.lookup(\"value\"));\n    }\n  });\n}));\n\nTemplate.__checkName(\"appEditorPlaceholder\");\nTemplate[\"appEditorPlaceholder\"] = new Template(\"Template.appEditorPlaceholder\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": function() {\n      return [ Spacebars.mustache(view.lookup(\"class\")), \" \", Spacebars.mustache(view.lookup(\"name\")) ];\n    }\n  });\n}));\n\nTemplate.__checkName(\"appEditorCheckbox\");\nTemplate[\"appEditorCheckbox\"] = new Template(\"Template.appEditorCheckbox\", (function() {\n  var view = this;\n  return HTML.LABEL({\n    \"for\": function() {\n      return [ \"editor-\", Spacebars.mustache(view.lookup(\"name\")) ];\n    }\n  }, \"\\n        \", HTML.INPUT(HTML.Attrs({\n    type: \"checkbox\",\n    \"class\": function() {\n      return Spacebars.mustache(view.lookup(\"name\"));\n    },\n    name: function() {\n      return Spacebars.mustache(view.lookup(\"name\"));\n    },\n    id: function() {\n      return [ \"editor-\", Spacebars.mustache(view.lookup(\"name\")) ];\n    }\n  }, function() {\n    return Spacebars.attrMustache(view.lookup(\"checked\"));\n  })), \"\\n        \", Blaze.View(function() {\n    return Spacebars.mustache(view.lookup(\"translate\"), view.lookup(\"label\"));\n  }), \"\\n        \", HTML.SMALL(Blaze.View(function() {\n    return Spacebars.mustache(view.lookup(\"hint\"));\n  })), \"\\n    \");\n}));\n\nTemplate.__checkName(\"appEditorSelect\");\nTemplate[\"appEditorSelect\"] = new Template(\"Template.appEditorSelect\", (function() {\n  var view = this;\n  return [ HTML.LABEL({\n    \"for\": function() {\n      return [ \"editor-\", Spacebars.mustache(view.lookup(\"name\")) ];\n    }\n  }, Blaze.View(function() {\n    return Spacebars.mustache(view.lookup(\"translate\"), view.lookup(\"label\"));\n  }), \"\\n        \", HTML.SMALL(Blaze.View(function() {\n    return Spacebars.mustache(view.lookup(\"hint\"));\n  })), \"\\n    \"), \"\\n    \", HTML.SELECT({\n    name: function() {\n      return Spacebars.mustache(view.lookup(\"name\"));\n    },\n    id: function() {\n      return [ \"editor-\", Spacebars.mustache(view.lookup(\"name\")) ];\n    },\n    \"class\": function() {\n      return [ \"form-control \", Spacebars.mustache(view.lookup(\"name\")) ];\n    }\n  }, \"\\n        \", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"options\"));\n  }, function() {\n    return [ \"\\n        \", HTML.OPTION(HTML.Attrs({\n      value: function() {\n        return Spacebars.mustache(view.lookup(\"value\"));\n      }\n    }, function() {\n      return Spacebars.attrMustache(view.lookup(\"selected\"));\n    }), Blaze.View(function() {\n      return Spacebars.mustache(view.lookup(\"name\"));\n    })), \"\\n        \" ];\n  }), \"\\n    \") ];\n}));\n\nTemplate.__checkName(\"appEditorButton\");\nTemplate[\"appEditorButton\"] = new Template(\"Template.appEditorButton\", (function() {\n  var view = this;\n  return HTML.BUTTON({\n    \"class\": function() {\n      return [ \"btn btn-\", Spacebars.mustache(view.lookup(\"btnType\")), \" \", Spacebars.mustache(view.lookup(\"name\")) ];\n    }\n  }, Blaze.View(function() {\n    return Spacebars.mustache(view.lookup(\"translate\"), view.lookup(\"label\"));\n  }));\n}));\n\nTemplate.__checkName(\"appEditorSeparator\");\nTemplate[\"appEditorSeparator\"] = new Template(\"Template.appEditorSeparator\", (function() {\n  var view = this;\n  return HTML.Raw(\"<hr>\");\n}));\n\nTemplate.__checkName(\"appEditorInvalid\");\nTemplate[\"appEditorInvalid\"] = new Template(\"Template.appEditorInvalid\", (function() {\n  var view = this;\n  return [ \"Invalid template for \", Blaze.View(function() {\n    return Spacebars.mustache(view.lookup(\"type\"));\n  }) ];\n}));\n","var EditorCollection = new Meteor.Collection(null);\n\nvar capitalize = function(str) {\n    return str[0].toUpperCase() + str.slice(1);\n};\n\nvar defaultFieldOptions = {\n    'name': 'fieldName', // defauls to field key\n    'type': 'text', // textarea, select, radio, checkbox. Default: 'text'\n    'options': null, // object with k-v pairs or simple [] (data provider for select/radio/checkbox)\n    'label': 'Field label', // defaults to capitalized field name,\n    'default': null, // default value when no value object is provided\n    'post': function(v) {\n        return v;\n    }, // method executed after data retrieval\n    'render': function() {\n        return true;\n    } // method executed to check if field has to be rendered\n};\n\nvar logobj = function(obj) {\n    if (typeof console !== 'undefined') {\n        console.log(obj);\n    }\n};\n\nvar defaultOptions = {\n    'fields': { // should be overwritten when using, this is a sample cfg\n        'fieldName0': defaultFieldOptions\n        /* ... */\n    },\n    'data': {}, // some object to populate the fields\n    'save': logobj, // callback for when save is pressed\n    'discard': logobj, // callback for when cancel / close is pressed\n    '_type': 'editor'\n};\n\nTemplate.appEditors.helpers({\n    editors: function() {\n        return EditorCollection.find();\n    }\n});\n\n// converts ['a','b','c'] =to=> {'a':'a', 'b':'b', 'c':'c'}\nvar remapOptions = function(e, key) {\n    return {\n        value: typeof key === 'number' ? e : key,\n        name: e\n    };\n};\n\nvar rebuildField = function(field, fieldName, data) {\n    data = data || {};\n    field['default'] = _.isFunction(field['default']) ? field['default']() : field['default'];\n    var calcdOpts = {\n        name: fieldName,\n        label: capitalize(fieldName),\n        value: _.isUndefined(data[fieldName]) ? field['default'] : data[fieldName]\n    };\n    if (typeof field === 'object') {\n        field = $.extend({}, defaultFieldOptions, calcdOpts, field);\n        field.label = App.strf(field.label) || fieldName;\n        field.options = _.map(field.options, remapOptions);\n    } else {\n        field = $.extend({}, defaultFieldOptions, calcdOpts);\n    }\n    return field;\n};\n\nvar buildFieldArr; // because of jshint\n\nvar rebuildArrayField = function(field, fieldName, data) {\n    field = _.extend({}, field);\n    field.fields = buildFieldArr(field.fields);\n    field.name = field.name || fieldName;\n    field.post = field.post || defaultFieldOptions.post;\n    field.label = App.strf(field.label) || fieldName;\n    field.data = _.map(data[fieldName], function(el, idx) {\n        el.idx = idx;\n        return el;\n    });\n    return field;\n};\n\nbuildFieldArr = function(fields, data) {\n    var fieldArr = [];\n    data = data || {};\n    for (var fieldName in fields) {\n        if (fields.hasOwnProperty(fieldName)) {\n            var field = fields[fieldName];\n            if (field.type === 'array') {\n                field = rebuildArrayField(field, fieldName, data);\n            } else {\n                field = rebuildField(field, fieldName, data);\n            }\n            fieldArr.push(field);\n        }\n    }\n    return fieldArr;\n};\n\nvar setupI18nOptions = function(options) {\n    options.i18nEnabled = true;\n    var langs = App.i18n.getLanguages();\n    options.languages = _.map(langs, function(e) {\n        return {\n            title: e\n        };\n    });\n    options.i18nFields = {};\n    var defaultLanguage = App.i18n.getDefaultLanguage();\n    _.each(langs, function(lang) {\n        var data = options.data;\n        if (defaultLanguage !== lang) {\n            data = options.data.i18n ? options.data.i18n[lang] : {};\n        }\n        var fields = buildFieldArr(options.fields.i18n, data);\n        if (defaultLanguage !== lang) {\n            _.each(fields, function(field) {\n                field.name = field.name + '-' + lang;\n            });\n        }\n        options.i18nFields[lang] = fields;\n    });\n\n    options.fields = $.extend({}, options.fields);\n    delete options.fields.i18n;\n};\n\nvar setupOptions = function(options) {\n    options = $.extend({}, defaultOptions, options);\n    if (options.fields.i18n) {\n        if (App.i18n.isActive()) {\n            setupI18nOptions(options);\n        } else {\n            options.fields = _.extend({}, options.fields.i18n, options.fields);\n            delete options.fields.i18n;\n        }\n    }\n    var fieldArr = buildFieldArr(options.fields, options.data);\n    options.fields = fieldArr;\n    return options;\n};\n\nvar fieldRendered = function() {\n    var self = this;\n\n    _.each(self.data.events, function(handler, eventName) {\n        $(self.find('.' + self.data.name)).on(eventName, function(e) {\n            handler.call(self.data, e);\n        });\n    });\n};\n\nvar fieldHelper = function() {\n    _.extend(this, this.currentContext);\n    delete this.currentContext;\n    // console.log(this);\n    var tplt;\n    var templateName = ('appEditor' + capitalize(this.type));\n    if (Template[templateName]) {\n        tplt = Template[templateName];\n    } else {\n        tplt = Template.appEditorInvalid;\n    }\n    tplt.rendered = tplt.rendered || fieldRendered;\n    return tplt;\n};\nTemplate.appEditorForm.helpers({\n    field: fieldHelper\n});\nTemplate.appEditorArray.helpers({\n    field: fieldHelper,\n    mergedContext: function(data) {\n        // console.log(this, data);\n        this.value = _.isUndefined(data[this.name]) ? this['default'] : data[this.name];\n        this.idx = data.idx;\n        return this;\n    }\n});\n\nTemplate.appEditorI18nForm.helpers({\n    field: fieldHelper,\n    active: function() {\n        return this.title === App.i18n.getDefaultLanguage() ? 'active' : '';\n    },\n    i18nFields: function(options, language) {\n        return options.i18nFields[language];\n    },\n    panelId: function(options, language) {\n        return 'editor_' + options._id + '_' + language;\n    }\n});\n\nTemplate.appEditorSelect.selected = function(selection) {\n    return this.value === selection ? 'selected=\"selected\"' : '';\n};\n\nTemplate.appEditorCheckbox.checked = function() {\n    return this.value ? {\n        checked: 'checked'\n    } : '';\n};\n\nvar $fieldForName = function(name, $ctx) {\n    var selector = '.' + name.replace(/\\./gi, '\\\\.');\n    selector += ':not(div)';\n    var $el = $(selector, $ctx);\n    return $el;\n};\n\nvar collectData; // because jshint\n\nvar collectArrayData = function(field, $ctx) {\n    var data = [];\n    $ctx = $ctx.find('.array-wrapper.' + field.name);\n    $ctx.find('.array-element').each(function() {\n        var $lctxt = $(this);\n        var elData = collectData(field.fields, $lctxt);\n        data.push(elData);\n    });\n    // collectData(field.fields, $ctx.find('array-wrapper ' + field.name));\n    return data;\n};\n\ncollectData = function(fields, $ctx, i18nSuffixToRemove) {\n    var data = {};\n    for (var i = 0; i < fields.length; i++) {\n        var field = fields[i];\n        var val;\n        switch (field.type) {\n            case 'file':\n                var files = $fieldForName(field.name)[0].files;\n                val = files.length > 0 ? files[0] : null;\n                break;\n            case 'checkbox':\n                val = $fieldForName(field.name, $ctx).prop('checked');\n                break;\n            case 'array':\n                val = collectArrayData(field, $ctx);\n                break;\n            case 'button':\n                continue;\n            default:\n                val = $fieldForName(field.name, $ctx).val();\n                break;\n        }\n        var fieldName = field.name;\n        if (i18nSuffixToRemove) {\n            fieldName = fieldName.replace(new RegExp(i18nSuffixToRemove + '$'), '');\n        }\n        data[fieldName] = field.post(val);\n    }\n    return data;\n};\n\nvar collectI18nData = function(collectedData, options, $ctx) {\n    if (!App.i18n.isActive()) {\n        return;\n    }\n    var data = {};\n    var langs = App.i18n.getLanguages();\n    var defaultLanguage = App.i18n.getDefaultLanguage();\n    _.each(langs, function(lang) {\n        var dt;\n        if (lang === defaultLanguage) {\n            dt = collectData(options.i18nFields[lang], $ctx);\n            _.extend(collectedData, dt);\n        } else {\n            dt = collectData(options.i18nFields[lang], $ctx, '-' + lang);\n            data[lang] = dt;\n        }\n    });\n    return data;\n};\n\nvar hideAnd = function(actionName, options, $ctx) {\n    var collectedData = collectData(options.fields, $ctx);\n    collectedData.i18n = collectI18nData(collectedData, options, $ctx);\n    options[actionName](collectedData, options.data);\n    $ctx.addClass('init');\n    setTimeout(function() {\n        EditorCollection.remove(options._id);\n    }, 500);\n};\n\nTemplate.appEditor.events({\n    'submit form': function(e) {\n        e.preventDefault();\n        var $ctx = $(e.currentTarget).parents('.editor-wrapper');\n        hideAnd('save', this, $ctx);\n    },\n    'click .discard': function(e) {\n        e.preventDefault();\n        var $ctx = $(e.currentTarget).parents('.editor-wrapper');\n        hideAnd('discard', this, $ctx);\n    }\n});\n\nTemplate.appEditor.rendered = function() {\n    var $el = $(this.firstNode);\n    setTimeout(function() {\n        $el.removeClass('init');\n    });\n};\n\nApp.component('editor').expose({\n    edit: function(options) {\n        options = setupOptions(options);\n        EditorCollection.insert(options);\n    },\n    buildFieldArr: buildFieldArr,\n    collectData: collectData\n});\n"]}